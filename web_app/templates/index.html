<!DOCTYPE html>
<html lang="en" >

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NYC - A Taxi's Tale">
    <meta name="author" content="Trevor Rempel">
    <link rel="shortcut icon" href="static/ico/favicon.png">

    <title>NYC - A Taxi's Tale</title>
    <link rel="apple-touch-icon" sizes="76x76" href='static/img/nyc_cab_logo.jpg'>
    <link rel="icon" type="image/png" sizes="96x96" href='static/img/nyc_cab_logo.jpg'>


    <!-- Bootstrap core CSS -->
    <link href="static/css/bootstrap.css" rel="stylesheet">




    <!-- Custom styles for this template -->
    <link href="static/css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="static/css/icomoon.css">
    <link href="static/css/animate-custom.css" rel="stylesheet">




    
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,700' rel='stylesheet' type='text/css'>
    
    <script src="static/js/jquery.min.js"></script>
	<script type="text/javascript" src="static/js/modernizr.custom.js"></script>

	





    

    

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link src = "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.1.0/css/bootstrap-slider.css"></script>
    <link src = "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.1.0/css/bootstrap-slider.min.css"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.1.0/bootstrap-slider.js"></script>
	
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/7.1.0/bootstrap-slider.min.js"></script>
	<!-- <style type="text/css">
		   body { background: black !important; } /* Adding !important forces the browser to overwrite the default style applied by Bootstrap */
		 </style> -->

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/css/bootstrap-select.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>

<!-- (Optional) Latest compiled and minified JavaScript translation files -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/i18n/defaults-*.min.js"></script>

	<style>
	      html, body {
	        height: 100%;
	        width: 100%;
	        margin: 10;
	        padding: 10;
	      }

	      #map {
	        height: 75%;
	        width: 75%;
	        vertical-align: middle;
	        text-align: center;
	        background-color: #000
	      }
	      #map2 {
	        height: 75%;
	        width: 75%;
	        vertical-align: middle;
	        text-align: center;
	        background-color: #000
	      }

	      #map3 {
	        height: 75%;
	        width: 75%;
	        vertical-align: middle;
	        text-align: center;
	        background-color: #000
	      }

	      #select-input {
    			text-align: center;	
    			form-inline: margin:5px 3px;

			}
		#select-club {
    			text-align: center;	
    			form-inline: margin:5px 3px;

			}
    </style>
    <style type="text/css">
    .btn:focus {
  		outline: #f7b731;
  		border-color: #f7b731;
	}
	 
	</style>


		<style type="text/css">
			div#map { margin: 0 auto 0 auto; }
			div#map2 { margin: 0 auto 0 auto; }
			div#map3 { margin: 0 auto 0 auto; }
		</style>



  </head>

  <body data-spy="scroll" data-offset="0" data-target="#navbar-main">
  
	<div id="get">
			{% if scroll %}
			<script>
			    document.location.hash = '#' + '{{ scroll |safe}}';
			</script>
			{% endif %}
	</div>
  
  	<div id="navbar-main">

      <!-- Fixed navbar -->
   	  <div class="navbar navbar-inverse navbar-fixed-top">

        <div class="container">

          <div class="navbar-header">

            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">

            <span class="icon icon-map" style="font-size:30px; color:#f7b731;"></span>

          	</button>

            <a class="navbar-brand hidden-xs hidden-sm" href="#home">
             <span class="icon icon-map" style="font-size:18px; color:#f7b731;"></span>
            </a>
          </div>

          <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav">

              <li><a href="#home" class="smoothScroll">Home</a></li>
              <li> <a href="#heartbeat" class="smoothScroll">Heartbeat of a City</a></li>
			  <li> <a href="#tips" class="smoothScroll"> Bankers</a></li>
			  <li> <a href="#pop_clubs" class="smoothScroll"> Club Goers</a></li>
			  <li> <a href="#club_owner" class="smoothScroll">Club Owners</a></li>
			  <li> <a href="#banker" class="smoothScroll">Where the People Are</a></li>
			  <li> <a href="#contact" class="smoothScroll"> Contact</a></li>

		     </ul>

           </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
  
		<!-- ==== HEADERWRAP ==== -->
	<div id="headerwrap" id="home" name="home">

	  <header class="clearfix">

	    <h1><span class = "icon" >There and Back Again</span></h1>
	    <h3><span>A Taxi's Tale</span></h3>	   
	   </header>

	 </div><!-- /headerwrap -->

		<!-- ==== GREYWRAP ==== -->
	

    <div  id="heartbeat" name="heartbeat">
    	<br>
		<hr>
		<br>

	  <div id="greywrap">
			
	    <div class="row white" >

		  <center>
		    <div >

			  <span class="icon icon-play"></span>
			    <h2>The Road Most Taken</h2>

			       <p>See the concentration of dropoffs change over the course of a day</p>

			</div>
		  </center>
				
	     </div>
			
	   </div>

    </div>


    <span id = "blackwrap">
      <center>
      <div style="width:100%; height:100%; background-image:url('static/img/video_back.jpg'); background-repeat: no-repeat; background-size:cover"> 
	    <video width="750" height="500" controls loop>

          <source src="static/clips/taxi_half.mp4" type="video/mp4">
  
           Your browser does not support the video tag.

         </video>
         </div>
      </center>
    </span>


<div  id="banker" name="banker">
		
		<br>
		<br>

			<div id="greywrap">
				
				<div class="row white">

					<center>
						<div >
							<span class="icon icon-home"></span>
								<h2>Where the Investment Bankers Are</h2>
							<p>Concentration of pickups for customers dropped off at investment banks</p>
						</div><!-- col-lg-4 -->	
					</center>
					
				</div><!-- row -->
				
			</div><!-- greywrap -->

		</div>

		<div id = "bank_map"></div>

    <span>


  	<br>
		<hr>
		<br>
		<iframe width="100%" height="520" frameborder="0" src="https://tjrempel87.carto.com/viz/e406c58e-4782-11e6-9c8b-0e3ff518bd15/embed_map" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>

      </span>
      <hr>
      <center>
		<p>
		Concentration of pickup locations for dropoffs near 50 investment banks between 5am and 9am on Monday to Friday, clustered by zipcode
		</p>
	  </center>


		<!-- ==== Night Clubs ==== -->
		<div  id="pop_clubs" name="pop_clubs">
		<br>

     	<br>
		  <div id="greywrap">
			
		    <div class="row white" >
				<center>
				  <div>

					<span class="icon icon-headphones"></span>
					<h2>A Journey of a Hundred Clubs</h2>
					<p>150 nightclubs ranked by number of dropoffs</p>

				  </div>
				</center>
				
			</div>
		  </div>
		</div>
		<br>
		<hr>
		<br>
		<div id="map2" style="width: 90%; height: 100% margin: 0 auto;" class = "icon"></div>
		<hr>
		<div>
	  <center>
		<p>
		Number of dropoffs at 150 nightclubs between 12am and 4am on Fridays and Saturdays, normalized by borough. 
		</p>
	  </center>
	</div>
   



		
		
 



		<div  id="club_owner" name="club_owner">
		
		<br>
		<br>

			<div id="greywrap">
				
				<div class="row white">

					<center>
						<div >
							<span class="icon icon-loop"></span>
								<h2>From Here to There - Are Clubbers Everywhere?</h2>
							<p>Select a club to see where patrons tend to live</p>
						</div><!-- col-lg-4 -->	
					</center>
					
				</div><!-- row -->
				
			</div><!-- greywrap -->

		</div>

		<div id = "club_map"></div>

    <span>


  	<br>
		<hr>
		<br>
		<div id="map3" style="width: 90%; height: 100% margin: 0 auto;" class = "icon"></div>

          <form id='select-club' method='post' action='club_zipcodes' class = "form-inline">

			    
				<div class="form-group">
				    
				    <!-- <label>Month</label>
				     -->
				      <input class = "form-control" type = "text" id = 'club' name='club' value="" readOnly="true"> 
	             </div>	 

				   
				    	<button class="btn btn-default" type='submit' value='Club' >Submit</button>
				
			
                
       
          </form>

      </span>
      <hr>
      <center>
		<p>
		For each club shows where patrons are arriving from and going to on Friday and Saturday nights, clustered by zipcode.

		</p>
	  </center>
          

		</div> 


		   <div  id="tips" name="tips">
     	<br>

     	<br>

	   <div id="greywrap">
			
	    <div class="row white">

			<center>
			   <div>
				  <span class="icon icon-location"></span>

					<h2>To be Where the People Are</h2>	
					<p> Areas where people tend to be concentrated<p>

			    </div>
			</center>
	
		</div>

	   </div>

      </div>

		<div id = "tip_map"></div>



    <span>


  	<br>
		<hr>
		<br>


      <div id="map" style="width: 90%; height: 100% margin: 0 auto;" class = "icon"></div>
 
  	
        
      	
          <form id='select-input' method='post' action='index'  class = "form-inline">

			    
				<div class="form-group">
				    
				    <!-- <label>Month</label>
				     -->
				      <select class = "selectpicker form-control" name='month' title = "Month" data-size = "7"> 
	                		  {% for m in month_list %}
	                		{% if m == month %}
                		   <option value = "{{month}}"  selected>{{month}}</option>
                			{% else%}
                			<option value = "{{m}}" >{{m}}</option>
                			{% endif %}
	                			
	                		
	                		   {% endfor %}
	                	</select>
			  		</div>

			  
			    
				    <div class="form-group">
				    
				    <!-- <label>Weekday</label> -->
			
				      <select class = "selectpicker form-control" name='day' title = "Weekday" data-size = "7">
                		   {% for d in day_list %}
                		   {% if d == day %}
                		   <option value = "{{d}}"  selected>{{d}}</option>
                			{% else%}
                			<option value = "{{d}}" >{{d}}</option>
                			{% endif %}
                		   {% endfor %}
                	      </select>
				    </div>

				 
				    <div class="form-group">
				    <!-- <label>Time</label> -->
				    
				      <select class = "selectpicker form-control" name='time' title = "Time" data-size = "7" dropupAuto = "false">
                		{% for t in time_list %}
                			{% if t == time %}
                		   <option value = "{{t}}"  selected>{{t}}</option>
                			{% else%}
                			<option value = "{{t}}" >{{t}}</option>
                			{% endif %}
                			
                			
                		{% endfor %}
                	  </select>
				    </div>

				   
				    	<button class="btn btn-default" type='submit' value='Tips' >Submit</button>
				
			
                
       
          </form>
          
        
      
    </span>
   	<hr>
   	<div>
	  <center>
		<p>
		Shows areas of where people are most highly concentrated for a given month, day of the week and time of the day. Each area is colored based on the number of people.
		</p>
	  </center>
	</div>

          

	



		<section class="section-divider textdivider divider6">

			<div class="container">

				<h1>"The road goes ever on and on."</h1>

				
				
			</div><!-- container -->

		</section><!-- section -->
		
		<div class="container" id="contact" name="contact">

			<div class="row">

			<br>

				<h1 class="centered"></h1>
				<hr>
				<br>
				<br>
				
				<div>
				  <center>
				    <h1>Contact Information</h1>
					 <p>
					<!-- <span class="icon icon-home"></span> Some Address 987, NY<br/>
						<span class="icon icon-phone"></span> +34 9884 4893 <br/>
						<span class="icon icon-mobile"></span> +34 59855 9853 <br/> -->
						 <span class="icon icon-envelop"></span> <a href="trevor.rempel@mg.thedataincubator.com"> @mg.thedataincubator.com </a> <br/>
						 <span class="fa fa-linkedin"></span> <a href="https://ca.linkedin.com/in/tjrempel"> tjrempel </a><br/>
						
						 <span class="icon icon-github"></span> <a href="https://github.com/TrevorRempel/"> TrevorRempel </a> <br/>
					 </p>
				  </center>
				</div>		
				
				
			</div><!-- row -->
		
		</div><!-- container -->


		
  <script>
      var lat_club = {{lat_club |tojson}};
      var lng_club = {{lng_club |tojson}};
      var club_names = {{club_names |tojson}};

      var club_counts = {{club_counts | tojson}};
      var club_urls = {{club_urls |tojson}};
      var map;
      var map2;
      var map3;
      function initMap() 

      {
      	var nyc_center = new google.maps.LatLng(40.6939206199602,-73.9383529238219);
      	var nyc_center_club = new google.maps.LatLng(40.7439206199602,-73.9383529238219);

      	var options = {

          center: nyc_center_club,
          zoom: 12,
          scrollwheel: false  
        };

        var options2 = {

          center: nyc_center_club,
          zoom: 12,
          scrollwheel: false  
        };
        var styles = [{"featureType":"all","elementType":"all","stylers":[{"invert_lightness":true},{"saturation":"0"},{"lightness":"33"},{"gamma":0.5},{"hue":"#f7b731"},{"weight":"0.51"}]},{"featureType":"transit.station.rail","elementType":"labels.text","stylers":[{"gamma":"1.00"}]},{"featureType":"transit.station.rail","elementType":"labels.text.fill","stylers":[{"hue":"#ff0000"},{"lightness":"42"}]},{"featureType":"transit.station.rail","elementType":"labels.icon","stylers":[{"hue":"#ff0000"},{"invert_lightness":true},{"lightness":"-15"},{"saturation":"31"}]}];
        
        var image = 
        {
		    url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png',
		    // This marker is 20 pixels wide by 32 pixels high.
		    size: new google.maps.Size(25, 25),
		    // The origin for this image is (0, 0).
		    origin: new google.maps.Point(0, 0),
		    // The anchor for this image is the base of the flagpole at (0, 32).
		    anchor: new google.maps.Point(0, 32)

		};

		var image_red = 
        {
		    url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png',
		    // This marker is 20 pixels wide by 32 pixels high.
		    size: new google.maps.Size(15, 15),
		    // The origin for this image is (0, 0).
		    origin: new google.maps.Point(0, 0),
		    // The anchor for this image is the base of the flagpole at (0, 32).
		    anchor: new google.maps.Point(0, 32),

		    scaledSize: new google.maps.Size(15, 15)

		};
		var image_blue = 
        {
		    url: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png',
		    // This marker is 20 pixels wide by 32 pixels high.
		    size: new google.maps.Size(25, 25),
		    // The origin for this image is (0, 0).
		    origin: new google.maps.Point(0, 0),
		    // The anchor for this image is the base of the flagpole at (0, 32).
		    anchor: new google.maps.Point(0, 32),

		    scaledSize: new google.maps.Size(25, 25)

		};

		

        map = new google.maps.Map(document.getElementById('map'), options);
        map.set('styles', styles);

        map2 = new google.maps.Map(document.getElementById('map2'), options2);
        map2.set('styles',styles);

        map3 = new google.maps.Map(document.getElementById('map3'), options2);
        map3.set('styles',styles);
      
 
        
        
       


    	

    	var infowindow_club = new google.maps.InfoWindow();
    	for (i = 0; i < club_counts.length; i++)

        {
        	
        	var position = new google.maps.LatLng(Number(lat_club[i]),Number(lng_club[i]));
        	var service = new google.maps.places.PlacesService(map2);
        	var circ = new google.maps.Circle({
		          	clickable: true,
		            strokeColor: '#FF0000',
		            strokeOpacity: 0.8,
		            strokeWeight: 0,
		            fillColor: '#FF0000',
		            fillOpacity: 0.50,
		            map: map2,
		            center: position,
		            radius: Number(club_counts[i]) * 300,
		          });
        	
								// '&nbsp; &nbsp; ' + place.rating 
	       //                      + '</h5><p>' + place.formatted_address + '<br />' + place.formatted_phone_number + '<br />' + 
        	// window.alert( place["name"])
        	circ.content = '<a  target="_blank" href=' + club_urls[i] + '>' + club_names[i] + '</a>';
        	// + '<a  target="_blank" href=' + web[i] + '>' + web[i] + '</a></p>';
        	
	        google.maps.event.addListener(circ, 'click', function() {
	              infowindow_club.setPosition(this.getCenter());
	              infowindow_club.setContent(this.content);
	              infowindow_club.open(map2, this);
	            });

	        
           // var title = i.toString()
          	
          	//var marker = new google.maps.Marker({position:position, icon:image2,map:map2});
            // Add the circle for this city to the map.
        };

        var infowindow_club2 = new google.maps.InfoWindow();
        var clicked = new google.maps.Marker({customInfo:"not clicked"});
    	for (i = 0; i < club_counts.length; i++)

        {

        	var position = new google.maps.LatLng(Number(lat_club[i]),Number(lng_club[i]));

        	var marker = new google.maps.Marker({
	          position: position,
	          map: map3,
	          icon: image_red,
	          clickable:true,
	          customInfo: '<a  target="_blank" href=' + club_urls[i] + '>' + club_names[i] + '</a>',
	          title: club_names[i]
        		});

        	
        	
	        google.maps.event.addListener(marker, 'mouseover', function() {
	              infowindow_club2.setPosition(this.position);
	              infowindow_club2.setContent(this.customInfo);
	              infowindow_club2.open(map3, this);
	              // this.setIcon(image_blue);
	            });
			google.maps.event.addListener(marker, 'click', function() {
				  if (clicked.customInfo !="not clicked" && clicked != this){
				  clicked.setIcon(image_red)
				  }	
	              this.setIcon(image_blue);
	              clicked = this;
	              document.getElementById('club').value = clicked.title;

	            });	     

			
	      };
          };

    </script>

    <script async defer src={{src|safe}} > </script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
		

	<script type="text/javascript" src="static/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="static/js/retina.js"></script>
	<script type="text/javascript" src="static/js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="static/js/smoothscroll.js"></script>
	<script type="text/javascript" src="static/js/jquery-func.js"></script>

  </body>

</html>
